{# Extracting this to a macro because the syntax is a little verbose and
tedious.

Note the trailings slash marking the link tag as "self-closing". This
makes the output valid XML as well as valid HTML5:
https://www.w3.org/TR/html5/syntax.html#start-tags
#}
{% macro linktag(link, base='') -%}
{%- if link.href.startswith('/') -%}
{%- set URL = base ~ link.href -%}
{%- else -%}
{%- set URL = link.href -%}
{%- endif %}
<link {% for attribute, value in link.items() %} {{ attribute }}=
    {%- if attribute=="href" %}"{{ URL }}"{% else %}"{{ value }}"
    {%- endif %}{% endfor %} />
{%- endmacro %}
